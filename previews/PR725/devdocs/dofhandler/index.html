<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Dof Handler · Ferrite.jl</title><meta name="title" content="Dof Handler · Ferrite.jl"/><meta property="og:title" content="Dof Handler · Ferrite.jl"/><meta property="twitter:title" content="Dof Handler · Ferrite.jl"/><meta name="description" content="Documentation for Ferrite.jl."/><meta property="og:description" content="Documentation for Ferrite.jl."/><meta property="twitter:description" content="Documentation for Ferrite.jl."/><meta property="og:url" content="https://ferrite-fem.github.io/Ferrite.jl/stable/devdocs/dofhandler/"/><meta property="twitter:url" content="https://ferrite-fem.github.io/Ferrite.jl/stable/devdocs/dofhandler/"/><link rel="canonical" href="https://ferrite-fem.github.io/Ferrite.jl/stable/devdocs/dofhandler/"/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.048/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.3.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.4/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/custom.css" rel="stylesheet" type="text/css"/><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.svg" alt="Ferrite.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Ferrite.jl</a></span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs (Ctrl + /)"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../manual/fe_intro/">Introduction to FEM</a></li><li><span class="tocitem">Manual</span><ul><li><a class="tocitem" href="../../manual/degrees_of_freedom/">Degrees of Freedom</a></li><li><a class="tocitem" href="../../manual/assembly/">Assembly</a></li><li><a class="tocitem" href="../../manual/boundary_conditions/">Initial and Boundary Conditions</a></li><li><a class="tocitem" href="../../manual/constraints/">Constraints</a></li><li><a class="tocitem" href="../../manual/grid/">Grid</a></li><li><a class="tocitem" href="../../manual/export/">Export</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li><a class="tocitem" href="../../overview/">Documentation of examples</a></li><li><a class="tocitem" href="../../examples/heat_equation/">Heat Equation</a></li><li><a class="tocitem" href="../../examples/postprocessing/">Postprocessing</a></li><li><a class="tocitem" href="../../examples/helmholtz/">Helmholtz equation</a></li><li><a class="tocitem" href="../../examples/incompressible_elasticity/">Incompressible Elasticity</a></li><li><a class="tocitem" href="../../examples/hyperelasticity/">Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/threaded_assembly/">Threaded Assembly</a></li><li><a class="tocitem" href="../../examples/plasticity/">von Mises plasticity</a></li><li><a class="tocitem" href="../../examples/transient_heat_equation/">Time Dependent Problems</a></li><li><a class="tocitem" href="../../examples/landau/">Ginzburg-Landau model energy minimization</a></li><li><a class="tocitem" href="../../examples/linear_shell/">Linear shell</a></li><li><a class="tocitem" href="../../examples/quasi_incompressible_hyperelasticity/">Nearly Incompressible Hyperelasticity</a></li><li><a class="tocitem" href="../../examples/ns_vs_diffeq/">Incompressible Navier-Stokes Equations via DifferentialEquations.jl</a></li><li><a class="tocitem" href="../../examples/computational_homogenization/">Computational homogenization</a></li><li><a class="tocitem" href="../../examples/stokes-flow/">Stokes flow</a></li><li><a class="tocitem" href="../../examples/topology_optimization/">Topology optimization</a></li></ul></li><li><span class="tocitem">API Reference</span><ul><li><a class="tocitem" href="../../reference/quadrature/">Quadrature</a></li><li><a class="tocitem" href="../../reference/interpolations/">Interpolation</a></li><li><a class="tocitem" href="../../reference/fevalues/">FEValues</a></li><li><a class="tocitem" href="../../reference/dofhandler/">Degrees of Freedom</a></li><li><a class="tocitem" href="../../reference/assembly/">Assembly</a></li><li><a class="tocitem" href="../../reference/boundary_conditions/">Boundary Conditions</a></li><li><a class="tocitem" href="../../reference/grid/">Grid &amp; AbstractGrid</a></li><li><a class="tocitem" href="../../reference/export/">Postprocessing</a></li><li><a class="tocitem" href="../../reference/utils/">Development utility functions</a></li></ul></li><li><a class="tocitem" href="../">Developer documentation</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><div class="docs-left"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Dof Handler</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Dof Handler</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/Ferrite-FEM/Ferrite.jl" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/master/docs/src/devdocs/dofhandler.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="dofhandler-interpolations"><a class="docs-heading-anchor" href="#dofhandler-interpolations">Dof Handler</a><a id="dofhandler-interpolations-1"></a><a class="docs-heading-anchor-permalink" href="#dofhandler-interpolations" title="Permalink"></a></h1><h2 id="Type-definitions"><a class="docs-heading-anchor" href="#Type-definitions">Type definitions</a><a id="Type-definitions-1"></a><a class="docs-heading-anchor-permalink" href="#Type-definitions" title="Permalink"></a></h2><p>Dof handlers are subtypes of <code>AbstractDofhandler{sdim}</code>, i.e. they are parametrized by the spatial dimension. Internally a helper struct <a href="devdocs/@ref"><code>InterpolationInfo</code></a> is utilized to enforce type stability during dof distribution, because the interpolations are not available as concrete types.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite.InterpolationInfo" href="#Ferrite.InterpolationInfo"><code>Ferrite.InterpolationInfo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">InterpolationInfo</code></pre><p>Gathers all the information needed to distribute dofs for a given interpolation. Note that this cache is of the same type no matter the interpolation: the purpose is to make dof-distribution type-stable.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/interpolations.jl#L73-L79">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite.PathOrientationInfo" href="#Ferrite.PathOrientationInfo"><code>Ferrite.PathOrientationInfo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">PathOrientationInfo</code></pre><p>Orientation information for 1D entities.</p><p>The orientation for 1D entities is defined by the indices of the grid nodes associated to the vertices. To give an example, the oriented path</p><pre><code class="nohighlight hljs">1 ---&gt; 2</code></pre><p>is called <em>regular</em>, indicated by <code>regular=true</code>, while the oriented path</p><pre><code class="nohighlight hljs">2 ---&gt; 1</code></pre><p>is called <em>inverted</em>, indicated by <code>regular=false</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Grid/grid.jl#L1385-L1400">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite.SurfaceOrientationInfo" href="#Ferrite.SurfaceOrientationInfo"><code>Ferrite.SurfaceOrientationInfo</code></a> — <span class="docstring-category">Type</span></header><section><div><pre><code class="language-julia hljs">SurfaceOrientationInfo</code></pre><p>Orientation information for 2D entities. Such an entity can be  possibly flipped (i.e. the defining vertex order is reverse to the  spanning vertex order) and the vertices can be rotated against each other. Take for example the faces</p><pre><code class="nohighlight hljs">1---2 2---3
| A | | B |
4---3 1---4</code></pre><p>which are rotated against each other by 90° (shift index is 1) or the faces</p><pre><code class="nohighlight hljs">1---2 2---1
| A | | B |
4---3 3---4</code></pre><p>which are flipped against each other. Any combination of these can happen.  The combination to map this local face to the defining face is encoded with this data structure via <span>$rotate \circ flip$</span> where the rotation is indiced by the shift index.     !!!NOTE TODO implement me.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Grid/grid.jl#L1405-L1428">source</a></section></article><h2 id="Internal-API"><a class="docs-heading-anchor" href="#Internal-API">Internal API</a><a id="Internal-API-1"></a><a class="docs-heading-anchor-permalink" href="#Internal-API" title="Permalink"></a></h2><p>The main entry point for dof distribution is <a href="devdocs/@ref"><code>__close!</code></a>.</p><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite.find_field-Tuple{DofHandler, Symbol}" href="#Ferrite.find_field-Tuple{DofHandler, Symbol}"><code>Ferrite.find_field</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">find_field(dh::DofHandler, field_name::Symbol)::NTuple{2,Int}</code></pre><p>Return the index of the field with name <code>field_name</code> in a <code>DofHandler</code>. The index is a <code>NTuple{2,Int}</code>, where the 1st entry is the index of the <code>FieldHandler</code> within which the field was found and the 2nd entry is the index of the field within the <code>FieldHandler</code>.</p><div class="admonition is-info"><header class="admonition-header">Note</header><div class="admonition-body"><p>Always finds the 1st occurence of a field within <code>DofHandler</code>.</p></div></div><p>See also: <a href="#Ferrite.find_field-Tuple{DofHandler, Symbol}"><code>find_field(fh::FieldHandler, field_name::Symbol)</code></a>, <a href="#Ferrite._find_field-Tuple{FieldHandler, Symbol}"><code>_find_field(fh::FieldHandler, field_name::Symbol)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L640-L652">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite._find_field-Tuple{FieldHandler, Symbol}" href="#Ferrite._find_field-Tuple{FieldHandler, Symbol}"><code>Ferrite._find_field</code></a> — <span class="docstring-category">Method</span></header><section><div><pre><code class="language-julia hljs">_find_field(fh::FieldHandler, field_name::Symbol)::Int</code></pre><p>Return the index of the field with name <code>field_name</code> in the <code>FieldHandler</code> <code>fh</code>. Return  <code>nothing</code> if the field is not found.</p><p>See also: <a href="#Ferrite.find_field-Tuple{DofHandler, Symbol}"><code>find_field(dh::DofHandler, field_name::Symbol)</code></a>, <a href="#Ferrite.find_field-Tuple{DofHandler, Symbol}"><code>find_field(fh::FieldHandler, field_name::Symbol)</code></a>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L678-L685">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite._close_fieldhandler!" href="#Ferrite._close_fieldhandler!"><code>Ferrite._close_fieldhandler!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">_close_fieldhandler!(dh::DofHandler{sdim}, fh::FieldHandler, fh_index::Int, nextdof::Int, vertexdicts, edgedicts, facedicts)</code></pre><p>Main entry point to distribute dofs for a single <a href="../../reference/dofhandler/#Ferrite.FieldHandler"><code>FieldHandler</code></a> on its subdomain.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L325-L329">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite._distribute_dofs_for_cell!" href="#Ferrite._distribute_dofs_for_cell!"><code>Ferrite._distribute_dofs_for_cell!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">_distribute_dofs_for_cell!(dh::DofHandler{sdim}, cell::AbstractCell, ip_info::InterpolationInfo, nextdof::Int, vertexdict, edgedict, facedict) where {sdim}</code></pre><p>Main entry point to distribute dofs for a single cell.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L390-L394">source</a></section></article><article class="docstring"><header><a class="docstring-article-toggle-button fa-solid fa-chevron-down" href="javascript:;" title="Collapse docstring"></a><a class="docstring-binding" id="Ferrite.permute_and_push!" href="#Ferrite.permute_and_push!"><code>Ferrite.permute_and_push!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia hljs">permute_and_push!</code></pre><p>For interpolations with more than one interior dof per edge it may be necessary to adjust the dofs. Since dofs are (initially) enumerated according to the local edge direction there can be a direction mismatch with the neighboring element. For example, in the following nodal interpolation example, with three interior dofs on each edge, the initial pass have distributed dofs 4, 5, 6 according to the local edge directions:</p><pre><code class="nohighlight hljs">+-----------+
|     A     |
+--4--5--6-&gt;+    local edge on element A

 ----------&gt;     global edge

+&lt;-6--5--4--+    local edge on element B
|     B     |
+-----------+</code></pre><p>For most scalar-valued interpolations we can simply compensate for this by reversing the numbering on all edges that do not match the global edge direction, i.e. for the edge on element B in the example.</p><p>In addition, we also have to preverse the ordering at each dof location.</p><p>For more details we refer to [1] as we follow the methodology described therein.</p><p>[1] Scroggs, M. W., Dokken, J. S., Richardson, C. N., &amp; Wells, G. N. (2022).     Construction of arbitrary order finite element degree-of-freedom maps on     polygonal and polyhedral cell meshes. ACM Transactions on Mathematical     Software (TOMS), 48(2), 1-23.</p><pre><code class="nohighlight hljs">!!!TODO Citation via DocumenterCitations.jl.

!!!TODO Investigate if we can somehow pass the interpolation into this function in a typestable way.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L512-L549">source</a></section><section><div><pre><code class="language-julia hljs">!!!NOTE TODO implement me.</code></pre><p>For more details we refer to [1] as we follow the methodology described therein.</p><p>[1] Scroggs, M. W., Dokken, J. S., Richardson, C. N., &amp; Wells, G. N. (2022).      Construction of arbitrary order finite element degree-of-freedom maps on      polygonal and polyhedral cell meshes. ACM Transactions on Mathematical      Software (TOMS), 48(2), 1-23.</p><pre><code class="nohighlight hljs">!!!TODO citation via software.

!!!TODO Investigate if we can somehow pass the interpolation into this function in a typestable way.</code></pre></div><a class="docs-sourcelink" target="_blank" href="https://github.com/Ferrite-FEM/Ferrite.jl/blob/64f0be4b64ddaee30db53f1a54afcc7e01593567/src/Dofs/DofHandler.jl#L591-L604">source</a></section></article></article><nav class="docs-footer"><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 0.28.0-DEV on <span class="colophon-date" title="Tuesday 23 May 2023 07:11">Tuesday 23 May 2023</span>. Using Julia version 1.9.0.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
